diff --git a/dlls/winealsa.drv/alsa.c b/dlls/winealsa.drv/alsa.c
index 046b447..c396c5e 100644
--- a/dlls/winealsa.drv/alsa.c
+++ b/dlls/winealsa.drv/alsa.c
@@ -82,10 +82,10 @@
     pthread_mutex_t lock;
 };
 
-#define EXTRA_SAFE_RT 40000
+#define EXTRA_SAFE_RT 4000
 
-static const REFERENCE_TIME def_period = 100000;
-static const REFERENCE_TIME min_period = 50000;
+static const REFERENCE_TIME def_period = 10000;
+static const REFERENCE_TIME min_period = 5000;
 
 static const WCHAR drv_keyW[] = {'S','o','f','t','w','a','r','e','\\',
     'W','i','n','e','\\','D','r','i','v','e','r','s','\\',
@@ -2086,21 +2086,28 @@
         goto exit;
     }
 
-    if(max_rate >= 48000)
-        fmt->Format.nSamplesPerSec = 48000;
-    else if(max_rate >= 44100)
-        fmt->Format.nSamplesPerSec = 44100;
-    else if(max_rate >= 22050)
-        fmt->Format.nSamplesPerSec = 22050;
-    else if(max_rate >= 11025)
-        fmt->Format.nSamplesPerSec = 11025;
-    else if(max_rate >= 8000)
-        fmt->Format.nSamplesPerSec = 8000;
-    else{
-        ERR("Unknown max rate: %u\n", max_rate);
-        params->result = AUDCLNT_E_DEVICE_INVALIDATED;
-        goto exit;
-    }
+    if (snd_pcm_hw_params_test_rate(pcm_handle, hw_params, 192000, 0) == 0) {
+        fmt->Format.nSamplesPerSec = 192000;
+    } else if (snd_pcm_hw_params_test_rate(pcm_handle, hw_params, 176400, 0) == 0) {
+        fmt->Format.nSamplesPerSec = 176400;
+    } else if (snd_pcm_hw_params_test_rate(pcm_handle, hw_params, 96000, 0) == 0) {
+        fmt->Format.nSamplesPerSec = 96000;
+    } else if (snd_pcm_hw_params_test_rate(pcm_handle, hw_params, 88200, 0) == 0) {
+        fmt->Format.nSamplesPerSec = 88200;
+    } else if (snd_pcm_hw_params_test_rate(pcm_handle, hw_params, 48000, 0) == 0) {
+         fmt->Format.nSamplesPerSec = 48000;
+    } else if (snd_pcm_hw_params_test_rate(pcm_handle, hw_params, 44100, 0) == 0) {
+         fmt->Format.nSamplesPerSec = 44100;
+    } else if (snd_pcm_hw_params_test_rate(pcm_handle, hw_params, 22050, 0) == 0) {
+         fmt->Format.nSamplesPerSec = 22050;
+    } else if (snd_pcm_hw_params_test_rate(pcm_handle, hw_params, 11025, 0) == 0) {
+         fmt->Format.nSamplesPerSec = 11025;
+    } else if (snd_pcm_hw_params_test_rate(pcm_handle, hw_params, 8000, 0) == 0) {
+         fmt->Format.nSamplesPerSec = 8000;
+    } else {
+        fmt->Format.nSamplesPerSec = max_rate;
+        WARN("Using fallback rate: %u\n", max_rate);
+     }
 
     fmt->Format.nBlockAlign = (fmt->Format.wBitsPerSample * fmt->Format.nChannels) / 8;
     fmt->Format.nAvgBytesPerSec = fmt->Format.nSamplesPerSec * fmt->Format.nBlockAlign;
