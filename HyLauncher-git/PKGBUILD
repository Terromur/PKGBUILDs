# Maintainer: Terromur <terromuroz@proton.me>
pkgname=HyLauncher-git
_pkgname=HyLauncher
pkgver=0.5
pkgrel=1
pkgdesc="HyLauncher - unofficial Hytale Launcher for free to play gamers"
arch=('x86_64')
url="https://github.com/ArchDevs/HyLauncher"
license=('custom')
depends=('webkit2gtk')
makedepends=('go' 'nodejs' 'npm' 'gtk3')
conflicts=('HyLauncher')
source=('git+https://github.com/ArchDevs/HyLauncher.git' 'HyLauncher.desktop' 'HyLauncher.jpg')
sha256sums=('SKIP' 'SKIP' 'SKIP')

prepare() {
go install github.com/wailsapp/wails/v2/cmd/wails@v2.11.0
}

build() {
  cd "$_pkgname"
  ~/go/bin/wails build
}

package() {
  cd "$_pkgname"

  install -Dm755 "build/bin/HyLauncher" "$pkgdir/usr/bin/HyLauncher"

  install -Dm644 "$srcdir/HyLauncher.desktop" "$pkgdir/usr/share/applications/HyLauncher.desktop"

  install -Dm644 "$srcdir/HyLauncher.jpg" "$pkgdir/usr/share/icons/hicolor/256x256/apps/HyLauncher.png"
  
  install -Dm644 LICENSE.txt "$pkgdir/usr/share/licenses/$_pkgname/LICENSE"
}
